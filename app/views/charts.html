<div class="container">
  <div style="background-color:#F0F0F0;overflow: hidden;border: 10px solid white;">
    <div class="row" ng-show="isPreview">
      <div class="col-md-3">
        <h4>Kit preview</h4>
      </div>
      <div class="col-md-3">
        <button class="btn btn-warning" ng-click="back()">
          Edit
          <i class="glyphicon glyphicon-edit"></i>
        </button>
      </div>
      <div class="col-md-6">
        <div class="pull-right">
          X elements selected&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
          <button class="btn btn-success" ng-click="generateFinalChart()">Generate</button>
        </div>
      </div>
    </div>
    <div class="row" ng-show="!isPreview">
      <div class="col-md-6">
      </div>
      <div class="col-md-6">
        <span ng-click='export();'>TestExport</span><br>
        
        <form id='fa' method="POST" action="http://ec2-54-242-146-91.compute-1.amazonaws.com/services/merge_xively_csv.php">
          <textarea id='ta' name='ta' style="display:none;"></textarea>
        </form>
      </div>
    </div>
  </div>
  <div class="row">
    <div ng-repeat="datastream in chartDatastreams">
      <div class="col-md-12">
        <h4>
          {{datastream.label}}
        </h4>
      </div>
      <br />
      <div class="col-md-9">
        <span class="input-group" ng-show="isPreview">
          <input type="text" class="form-control" ng-model="datastream.startDate" datepicker-popup="fullDate" is-open="isOpened['start'][datastream.id]" />
          <span class="input-group-btn">
            <button class="btn btn-default" ng-click="open($event, datastream.id, 'start')"><i class="glyphicon glyphicon-calendar"></i></button>
          </span>
          <input type="text" class="form-control" ng-model="datastream.endDate" datepicker-popup="fullDate" is-open="isOpened['end'][datastream.id]" />
          <span class="input-group-btn">
            <button class="btn btn-default" ng-click="open($event, datastream.id, 'end')"><i class="glyphicon glyphicon-calendar"></i></button>
          </span>
          <span class="input-group-btn">
            <button class="btn btn-success" ng-click="refresh(datastream)">Refresh</button>
          </span>
        </span>
        <div id="graph-{{datastream.id}}"></div>
        <div id="slider-{{datastream.id}}" ng-show="!isPreview"></div>
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-12" id="legend-{{datastream.id}}" ng-repeat="serie in datastream.series">
            <div class="row" ng-mouseover="over(datastream, serie)" ng-mouseleave="leave(datastream, serie)" ng-click="enableDisable(datastream, serie)">
              <i class="glyphicon glyphicon-stop col-md-2" style="color: {{serie.color}}"></i>
              <span class="col-md-6">{{serie.name}}</span>
              <span ng-switch on="serie.disabled" class="col-md-2">
                <i ng-switch-when="true" class="glyphicon glyphicon-eye-close" style="color: #777777"></i>
                <i ng-switch-default class="glyphicon glyphicon-eye-open" style="color: #ed9c28"></i>
              </span>
              <span class="dropdown col-md-2">
                <a class="dropdown-toggle">
                  <i class="glyphicon glyphicon-chevron-down"></i>
                </a>
                <span class="dropdown-menu">
                  Status:
                  <span ng-switch on="serie.active">
                    <span ng-switch-when="true" class="green-active">
                      Active
                    </span>
                    <span ng-switch-default class="red-inactive">
                      Inactive
                    </span>
                  </span>
                </span>
              </span>
            </div>
          </div>
        </div>
      </div>
      <br />
      <br />
    </div>
  </div>
</div>
